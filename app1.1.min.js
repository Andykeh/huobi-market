function BitKit(){return{scientific2float:function(t){var e,c,r,i,o,s,a="string"==typeof t?t.toLowerCase().replace(/\s/g,""):t.toString().toLowerCase().replace(/\s/g,""),n="000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";return/e/.test(a)?(c=/\+/.test(a),r=a.split("e"),e=/\-/.test(r[0].toString())?"-0.":"0.",r[0]=r[0].replace("-",""),i=r[0].split(".")[1]?r[0].split(".")[1].length:0,o=r[1],s=o.split(c?"+":"-")[1],r=r[0].replace(".",""),c?r+n.substring(0,s-i):e+n.substring(0,s-1)+r):a},Numbers:function(t,e){var c=this.scientific2float(t),r=c.indexOf("."),i=0,o=0;if(isNaN(c))o=0;else if(void 0!==e)if(r>0){if(i=c.substring(r+1,c.length).length,e>i){for(var s=0;e-i>s;s++)c+="0";o=c}else o=c.substring(0,e+1+r);0>=e&&(o=parseInt(t))}else if(e>0){c+=".";for(var a=0;e>a;a++)c+="0";o=c}else 0>=e&&(o=c);else o=Number(c);return o}}}function marketArrow(t,e,c,r){e>c&&""!==c&&c>0?(t.removeClass("rise").addClass("declining"),r&&r(1)):c>e&&""!==c&&c>0?(t.removeClass("declining").addClass("rise"),r&&r(2)):r&&r(0)}function SOCKET_API(t){return{marketOverview:function(e){return{msg:{msgType:"reqMsgSubscribe",version:t||1,requestIndex:Date.now(),symbolList:{marketOverview:[{symbolId:e,pushType:"pushLong"}]}},msgType:"marketOverview"}}}}function IoDetail(t){var e=SOCKET_API(),c=io.connect(t);return{IoOverview:function(t){function r(t){var e=t.symbolId,c=t.payload;if("marketOverview"==t.msgType){switch(e){case"btccny":marketArrow(a.parent(),c.priceNew,hbBtcNew),hbBtcNew=c.priceNew,hbBtcHigh=c.priceHigh,hbBtcLow=c.priceLow;break;case"ltccny":marketArrow(h.parent(),c.priceNew,hbLtcNew),hbLtcNew=c.priceNew,hbLtcHigh=c.priceHigh,hbLtcLow=c.priceLow;break;case"btccnyweek":marketArrow(g.parent(),c.priceNew,vcBtcNew),vcBtcNew=c.priceNew,vcBtcHigh=c.priceHigh,vcBtcLow=c.priceLow;break;case"ltccnyweek":marketArrow(v.parent(),c.priceNew,vcLtcNew),vcLtcNew=c.priceNew,vcLtcHigh=c.priceHigh,vcLtcLow=c.priceLow;break;default:return!1}s.length>0&&i(),Price_tip()}}function i(){"futures"==t?(g.html(BitKit().Numbers(vcBtcNew,2)),u.html(BitKit().Numbers(vcBtcHigh,2)),m.html(BitKit().Numbers(vcBtcLow,2)),v.html(BitKit().Numbers(vcLtcNew,2)),p.html(BitKit().Numbers(vcLtcHigh,2)),B.html(BitKit().Numbers(vcLtcLow,2))):(a.html(BitKit().Numbers(hbBtcNew,2)),n.html(BitKit().Numbers(hbBtcHigh,2)),l.html(BitKit().Numbers(hbBtcLow,2)),h.html(BitKit().Numbers(hbLtcNew,2)),w.html(BitKit().Numbers(hbLtcHigh,2)),b.html(BitKit().Numbers(hbBtcLow,2)))}var o=e.marketOverview,s=$("#app_wrap"),a=$("#hb_btc_new"),n=$("#hb_btc_high"),l=$("#hb_btc_low"),h=$("#hb_ltc_new"),w=$("#hb_ltc_high"),b=$("#hb_ltc_low"),g=$("#vc_btc_new"),u=$("#vc_btc_high"),m=$("#vc_btc_low"),v=$("#vc_ltc_new"),p=$("#vc_ltc_high"),B=$("#vc_ltc_low");"futures"==t?(c.emit("request",o("btccnyweek").msg),c.emit("request",o("ltccnyweek").msg)):(c.emit("request",o("btccny").msg),c.emit("request",o("ltccny").msg)),c.on("message",r)}}}function Price_tip(){localStorage.Btc_price&&0!==hbBtcNew&&hbBtcNew>=Number(localStorage.Btc_price)?("1"===arrMsgBox[0]&&showMsg("btc"),arrMsgBox[0]="0"):(arrMsgBox[0]="1",clearTimeout(refreshBtc)),localStorage.Ltc_price&&0!==hbLtcNew&&hbLtcNew>=Number(localStorage.Ltc_price)?("1"===arrMsgBox[1]&&showMsg("ltc"),arrMsgBox[1]="0"):(arrMsgBox[1]="1",clearTimeout(refreshLtc))}function showMsg(t){var e,c,r,i,o;e="btc_48.png",c="ltc_48.png",r=/(..)(:..)(:..)/.exec(new Date),i=r[1]%12||12,o=r[1]<12?"上午":"下午","btc"==t?(new Notification("比特币价格预警",{icon:e,body:"BTC价格已经达到"+hbBtcNew+"\n 时间"+i+r[2]+r[3]+" "+o}),refreshBtc=setTimeout(function(){showMsg(t)},localStorage.Time_out)):(new Notification("莱特币价格预警",{icon:c,body:"LTC价格已经达到"+hbLtcNew+"\n 时间"+i+r[2]+r[3]+" "+o}),refreshLtc=setTimeout(function(){showMsg(t)},localStorage.Time_out))}var hbBtcNew=0,hbBtcHigh=0,hbBtcLow=0,hbLtcNew=0,hbLtcHigh=0,hbLtcLow=0,vcBtcNew=0,vcBtcHigh=0,vcBtcLow=0,vcLtcNew=0,vcLtcHigh=0,vcLtcLow=0,arrMsgBox=["1","1"],refreshBtc,refreshLtc;$(function(){var t="https://hq.huobi.com",e="https://hq.bitvc.com",c=IoDetail(e),r=IoDetail(t),i=$("#app_option"),o=$("#option_btn"),s=$("#btc_not"),a=$("#ltc_not"),n=$("#time_out");c.IoOverview("futures"),r.IoOverview("actuals"),o.click(function(){i.is(":hidden")?i.slideDown():i.slideUp()}),s.change(function(){localStorage.Btc_price=$(this).val()}),a.change(function(){localStorage.Ltc_price=$(this).val()}),localStorage.Btc_price&&s.val(localStorage.Btc_price),localStorage.Ltc_price&&a.val(localStorage.Ltc_price),n.change(function(){localStorage.Time_out=1e3*$(this).val()}),localStorage.Time_out>0?n.val(localStorage.Time_out/1e3):localStorage.Time_out=1e3*n.val()});